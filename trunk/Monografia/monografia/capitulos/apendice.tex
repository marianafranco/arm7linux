\chapter{Pesquisas iniciais}

Antes da decisão pela implementação de um \emph{microkernel} próprio, foram feitas uma série de pesquisas sobre Sistemas Operacionais já existentes para sistemas embarcados, categoria da qual o processador ARM7TDMI e a placa Evaluator-7T fazem parte. Dentre os resultados encontrados, dois Sistemas Operacionais chamaram mais a atenção do grupo: o \emph{eCos} e o \emph{uCLinux}. Esses dois sistemas estão descritos nas seções seguintes.

Além disso, cogitou-se o uso de um ambiente de desenvolvimento baseado no Sistema Operacional GNU/Linux e na ferramenta GNUARM, uma \emph{toolchain} para compilação, embarque e depuração de código em processadores ARM. No entanto, a falta de familiaridade do grupo com ambas as ferramentas e as dificuldades encontradas para configurá-las e executá-las de maneira adequada resultou na escolha do ambiente Windows com desenvolvimento pelo CodeWarrior, uma vez que, para o primeiro, o grupo já possuía conhecimentos avançados e, para o segundo, a existência de uma documentação mais precisa fez com que a curva de aprendizado da ferramenta diminuísse consideravelmente.

\section{O Sistema Operacional \emph{eCos}}
\index{apendice!ecos}

Este sistema operacional para sistemas embarcados é de código aberto, e portanto, e não cobra royalties pelo seu uso. Porém, trata-se de um sistema não relacionado ao Linux. Um ponto pelo qual ele se destaca, é seu sistema de configuração. Esse sistema permite a imposição de requisitos bem definidos dos componentes de tempo de execução. Essas ferramentas são distribuídas conjuntamente com o código-fonte do eCos. Dessa forma, dadas as restrições de hardware da Evaluator-7T, o porte dessa sistema operacional é simples de ser feito.

Existem versões desse SO para diversas arquiteturas, inclusive a ARM. O trabalho residiria na adaptação à placa Evaluator-7T.

\section{O Sistema Operacional \emph{uCLinux}}
\index{apendice!uclinux}

Este sistema operacional é um porte do Linux para sistemas sem uma unidade de gerenciamento de memória (MMU), que é o caso da placa Evaluator-7T. Assim como o eCos, há portes dele para diversas arquiteturas, assim como diversas ferramentas que, assim como o Linux, são softwares livres. Tal fato torna interessante para tornar a placa independente de licenças. O que torna este sistema interessante é a existência de uma comunidade entusiasta com este sistema, fazendo com que exista muito material para estudo e assim reduzir a complexidade do porte pretendido.

\chapter{Arquivos Fonte} \label{chap:code}

\section{cinit.h} \label{sec:cinit.h}
\index{apendice!cinit.h}
\lstinputlisting[language=C++, numbers=left]{code/cinit.h}

\section{cinit.c} \label{sec:cinit.c}
\index{apendice!cinit.c}
\lstinputlisting[language=C++, numbers=left]{code/cinit.c}

\section{constants.h} \label{sec:constants.h}
\index{apendice!constants.h}
\lstinputlisting[language=C++, numbers=left]{code/constants.h}

\section{startup.s} \label{sec:startup.s}
\index{apendice!startup.s}
\lstinputlisting[language=C++, numbers=left]{code/startup.s}

% apps/

\section{apps/tasks.h} \label{sec:tasks.h}
\index{apendice!tasks.h}
\lstinputlisting[language=C++, numbers=left]{code/apps/tasks.h}

\section{apps/tasks.c} \label{sec:tasks.c}
\index{apendice!tasks.c}
\lstinputlisting[language=C++, numbers=left]{code/apps/tasks.c}

\section{apps/terminal.h} \label{sec:terminal.h}
\index{apendice!terminal.h}
\lstinputlisting[language=C++, numbers=left]{code/apps/terminal.h}

\section{apps/terminal.c} \label{sec:terminal.c}
\index{apendice!terminal.c}
\lstinputlisting[language=C++, numbers=left]{code/apps/terminal.c}

% interrup/

\section{interrupt/handler\_irq.s} \label{sec:handlerirq.s}
\index{apendice!handlerirq.s}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/handler_irq.s}

\section{interrupt/handler\_swi.s} \label{sec:handlerswi.s}
\index{apendice!handlerswi.s}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/handler_swi.s}

\section{interrupt/irq.h} \label{sec:irq.h}
\index{apendice!irq.h}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/irq.h}

\section{interrupt/irq.c} \label{sec:irq.c}
\index{apendice!irq.c}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/irq.c}

\section{interrupt/swi.h} \label{sec:swi.h}
\index{apendice!swi.h}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/swi.h}

\section{interrupt/swi.c} \label{sec:swi.c}
\index{apendice!swi.c}
\lstinputlisting[language=C++, numbers=left]{code/interrupt/swi.c}

% mutex/

\section{mutex/mutex.h} \label{sec:mutex.h}
\index{apendice!mutex.h}
\lstinputlisting[language=C++, numbers=left]{code/mutex/mutex.h}

\section{mutex/mutex.c} \label{sec:mutex.c}
\index{apendice!mutex.c}
\lstinputlisting[language=C++, numbers=left]{code/mutex/mutex.c}

% peripherals/

\section{peripherals/button.h} \label{sec:button.h}
\index{apendice!button.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/button.h}

\section{peripherals/button.c} \label{sec:button.c}
\index{apendice!button.c}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/button.c}

\section{peripherals/dips.h} \label{sec:dips.h}
\index{apendice!dips.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/dips.h}

\section{peripherals/dips.c} \label{sec:dips.c}
\index{apendice!dips.c}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/dips.c}

\section{peripherals/led.h} \label{sec:led.h}
\index{apendice!led.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/led.h}

\section{peripherals/segment.h} \label{sec:segment.h}
\index{apendice!segment.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/segment.h}

\section{peripherals/segment.c} \label{sec:segment.c}
\index{apendice!segment.c}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/segment.c}

\section{peripherals/serial.h} \label{sec:serial.h}
\index{apendice!serial.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/serial.h}

\section{peripherals/serial.c} \label{sec:serial.c}
\index{apendice!serial.c}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/serial.c}

\section{peripherals/timer.h} \label{sec:timer.h}
\index{apendice!timer.h}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/timer.h}

\section{peripherals/timer.c} \label{sec:timer.c}
\index{apendice!timer.c}
\lstinputlisting[language=C++, numbers=left]{code/peripherals/timer.c}

% syscalls/

\section{syscalls/exec.s} \label{sec:exec.s}
\index{apendice!exec.s}
\lstinputlisting[language=C++, numbers=left]{code/syscalls/exec.s}

\section{syscalls/exit.s} \label{sec:exit.s}
\index{apendice!exit.s}
\lstinputlisting[language=C++, numbers=left]{code/syscalls/exit.s}

\section{syscalls/fork.s} \label{sec:fork.s}
\index{apendice!fork.s}
\lstinputlisting[language=C++, numbers=left]{code/syscalls/fork.s}