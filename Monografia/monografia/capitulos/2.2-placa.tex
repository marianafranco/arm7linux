 % A Placa Experimental Evaluator-7T
\section{A Placa Experimental Evaluator-7T} \label{sec:conceitos_placa}
\index{conceitos!placa}

O principal elemento de hardware deste projeto é a placa experimental ARM Evaluator-7T, baseada no processador ARM7TDMI, um processador RISC de 32 bits capaz de executar o conjunto de instruções denominado Thumb.

Os principais elementos presentes na arquitetura da placa Evaluator-7T são os seguintes:

\begin{itemize}

\item Microcontrolador Samsung KS32C50100

\item 512kB EPROM flash

\item 512kB RAM estática (SRAM)

\item Dois conectores RS232 de 9 pinos tipo D

\item Botões de reset e de interrupção

\item Quatro LEDs programáveis pelo usuário e um display de 7 segmentos

\item Entrada de usuário por um interruptor DIP com 4 elementos

\item Conector Multi-ICE

\item Clock de 10MHz (o processador usa-o para gerar um clock de 50MHz)

\item Regulador de tensão de 3.3V

\end{itemize}

A figura \ref{arch_e7t} mostra a organização desses elementos na placa experimental.

%Não esquecer de colocar a fonte!
\begin{figure}[!ht]
\centering 
\includegraphics[height=12cm]{figuras/board_arch.png}
\caption{Arquitetura da placa Evaluator-7T. Fonte: \label{arch_e7t}} % \cite{aaa}
\end{figure}


Com relação à memória flash da placa, ela vem de fábrica com o bootstrap loader da placa e programa monitor de debug. O restante dela pode ser usado para os programas de usuário. A tabela \ref{table:mapamemflash}  mostra a faixa de endereços de cada região da memória.

% a tabela nao esta aparecendo no lugar certo (logo após o parágrafo acima)
\begin{table}[!ht]
\caption{Mapa da memória flash}
\centering
\begin{tabular}{| c | c |}
\hline  \textbf{Faixa de endereço} & \textbf{Descrição}  \\ 
\hline  0x01800000 a 0x01806FFF & Bootstrap loader  \\ 
\hline  0x01807000 a 0x01807FFF & Teste de produção  \\ 
\hline  0x01808000 a 0x0180FFFF & Reservado  \\ 
\hline  0x01810000 a 0x0181FFFF & Angel  \\ 
\hline  0x01820000 a 0x0187FFFF & Disponível para outros programas e dados  \\ 
\hline 
\end{tabular}
\label{table:mapamemflash}
\end{table}

Já em relação às duas portas seriais presentes na placa, cada uma tem usos específicos. A primeira, chamada DEBUG, é usada pelo monitor de debug ou pelo programa bootstrap presente na placa. Ela está conectada ao UART1 do microcontrolador. A segunda, chamada USER, é de uso genérico e está disponível para uso em programas. Ela está conectada ao UART0 do microcontrolador.

%BSL
\subsection{Bootstrap Loader}

Como mencionado anteriormente, a memória flash da placa contém uma região reservada para os programas Bootstrap Loader (BSL) e o programa monitor de debug chamado Angel.

O BSL é o primeiro programa a ser executado pelo microcontrolador quando esta é ligada ou reiniciada. Suas principais funções são:

\begin{itemize}

\item Fazer a conexão com o computador através da porta serial e uma aplicação de terminal, como o HyperTerminal do Windows

\item Prover a infraestrutura necessária à configuração da placa

\item Prover ajuda ao usuário

\item Gerenciar imagens de memória como um conjunto de módulos executáveis

\item Carregar aplicações na SRAM e executá-las

\end{itemize}

%Angel
\subsection{Angel Debug Monitor}

O monitor de debug Angel é fornecido conjuntamente com diversas placas da ARM e suas parceiras. Suas principais funcionalidades são:

\begin{itemize}

\item Função de depuração de código, incluindo inspeção de memória, download e execução de imagens de memória, uso de breakpoints e execução passo-a-passo

\item Inicialização da CPU e da placa e tratamento básico de exceções

\item Uma biblioteca ANSI C completa, com uso de semihosting para prover serviços do computador host que não estão disponíveis na placa

\end{itemize}

Há duas maneiras pelas quais o Angel se comunica com o ambiente de desenvolvimento de software.

A primeira é através da biblioteca de interfaces chamada "Remote\_A". Por ela, os depuradores se comunicam com um alvo do Angel quando fazem depuração ou execução de código.

A segunda é por meio de interrupções de software (SWI). O código do programa faz uma SWI para solicitar serviços dos Angel diretamente ou através da biblioteca C dod toolkit.